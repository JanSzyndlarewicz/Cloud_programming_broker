version: "3.8"

services:
  booking-service:
    build:
      context: booking-service/booking-service
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    env_file:
      - booking-service/booking-service/.env
    networks:
      - app_net
    deploy:
      replicas: 2

  cleaning-service:
    build:
      context: cleaning-service/cleaning-service
      dockerfile: Dockerfile
    ports:
      - "8001:8001"
    env_file:
      - cleaning-service/cleaning-service/.env
    networks:
      - app_net
    deploy:
      replicas: 3

  dining-service:
    build:
      context: dining-service/dining-service
      dockerfile: Dockerfile
    ports:
      - "8002:8002"
    env_file:
      - dining-service/dining-service/.env
    networks:
      - app_net
    deploy:
      replicas: 4

  accounting-service:
    build:
      context: accounting-service/accounting-service
      dockerfile: Dockerfile
    ports:
      - "8003:8003"
    env_file:
      - accounting-service/accounting-service/.env
    networks:
      - app_net
    deploy:
      replicas: 2

  notification-service:
    build:
      context: notification-service/notification-service
      dockerfile: Dockerfile
    ports:
      - "8004:8004"
    env_file:
      - notification-service/notification-service/.env
    networks:
      - app_net
    deploy:
      replicas: 2

networks:
  app_net:
